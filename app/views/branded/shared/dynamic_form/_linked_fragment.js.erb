$(() => {
  $('#modal-window').html('<%= escape_javascript(render "shared/dynamic_form/modal") %>');
  $('#modal-window').modal();


  $('#modal_fragment_form').on('ajax:success', (event, response) => {
    if (response.classname === 'research_output') {
      $('#research-outputs-list').html(response.html);
    } else if (response.source === 'list-modal') {
      $(`.fragment-${response.fragment_id} .linked-fragments-list.${response.classname}-list tbody`).html(response.html);
    } else {
      $(`.fragment-${response.fragment_id} .linked-fragments-select.${response.classname}-select select`).html(response.html);
    }
    $('#modal-window').modal('hide');
  }).on('ajax:error', () => {
    console.log('ajax:error');
  });
});
