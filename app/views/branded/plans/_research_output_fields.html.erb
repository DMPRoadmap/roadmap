<%# locals: { plan, research_output, research_output_types } %>
<% other_type_displayed = research_output.research_output_type.is_other ? '' : 'display:none;' %>
<div class='research-output-element'>
  <div class='research-output-fields'>
    <div class='field form-group research-output-abbreviation'>
      <%= f.label :name, d_('dmpopidor', 'Abbreviated Name (20 chars max.)'),  class: 'control-label' %>
      <%= f.text_field :abbreviation, maxlength: 20, class: 'form-control', "aria-required": true %>
    </div>
    <div class='field form-group research-output-fullname'>
      <%= f.label :fullname, d_('dmpopidor', 'Fullname'), class: 'control-label' %>
      <%= f.text_field :fullname, class: 'form-control', "aria-required": true  %>
    </div>
    <div class='field form-group research-output-type'>
      <%= f.label :research_output_type_id, d_('dmpopidor', 'Type'), class: 'control-label' %>
      <a href="<%= research_output_types_path %>" target="_blank" >
        <i class="fa fa-info-circle"></i>
      </a>
      <%= f.select(:research_output_type_id, 
                    options_for_select(
                      research_output_types.map{ |r| [r.label, r.id, { 'data-other' => r.is_other }] }, 
                      selected: research_output.research_output_type_id, disabled: ""
                    ),
                    { prompt: d_('dmpopidor', 'Please select the type of your research output.') },
                    { multiple: false, class: 'form-control research-output-type-select', "aria-required": true}) 
      %>
    </div>
    <div class='field form-group research-output-other-type' style='<%= other_type_displayed %>'>
      <%= f.label :other_type_label, d_('dmpopidor', 'Other Type'), class: 'control-label' %>
      <%= f.text_field :other_type_label, class: 'form-control' %>
    </div>
    <div class='field form-group research-output-pid'>
      <%= f.label :pid, d_('dmpopidor', 'Persistent Identifier'), class: 'control-label' %>
      <%= f.text_field :pid, class: 'form-control' %>
    </div>
    <%= f.hidden_field :order, class: 'research-output-order' %>
  </div>
  <div class='research-output-actions'>
    <i class="fa fa-arrows pull-left handle" aria-hidden="true"
             title="<%= d_('dmpopidor', 'Move research output') %>"></i>
    <%= link_to plan_research_output_url(plan, research_output), 
                data: {:confirm => d_('dmpopidor', 'Deleting this research output will remove the associated answers. Do you confirm ?')}, 
                :method => :delete  do %>
      <i class="fa fa-close pull-right" aria-hidden="true"
              title="<%= d_('dmpopidor', 'Delete research output') %>" %></i>
    <% end %>
  </div>
  <hr/>
</div>