<div class="row">
  <div class="col-md-12">
    <% if template == current && template.customization_of.nil? %>
      <div class="template_edit" style="display: none;">
        <%= render partial: "templates/edit_template", locals: { template: template, template_hash: template_hash } %>
      </div>
    <% end %>
  </div>
</div>
<div class="row">
  <div class="col-md-12">
    <div class="template_show">
      <%= render partial: "templates/show_template", locals: { template: template, current: current, template_hash: template_hash }%>
    </div>
  </div>
</div>
<!-- Accordion for phases -->
<div class="row">
  <div class="col-md-12">
    <div class="panel-group" id="phases_accordion" role="tablist">
      <!-- If template has phases-->
      <% if template_hash[:template][:phases].present? %>
        <% template_hash[:template][:phases].each do |phase_no, phase_hash| %>
          <% phase = phase_hash[:data] %>
            <div class="panel panel-default">
              <div class="panel-heading" role="tab" id="<%= "headingPhase#{phase.id}" %>">
                <h4 class="panel-title">
                  <%= link_to(
                        phase.title,
                        "#collapsePhase#{phase.id}",
                        { 'data-toggle': 'collapse', 'data-parent': '#phases_accordion', 'aria-expanded': 'false', 'aria-controls': "#collapsePhase#{phase.id}" }) %>
                </h4>
              </div>
              <div id="<%= "collapsePhase#{phase.id}" %>" class="panel-collapse collapse" role="tabpanel" aria-labelledby="<%= "headingPhase#{phase.id}" %>">
                <div class="panel-body">
                  <%= render partial: 'templates/show_phases_sections', locals: { phase: phase, phase_hash: phase_hash, template: template, current: current } %>
                </div>
              </div>
            </div>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
