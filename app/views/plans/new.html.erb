<div class="row">
  <div class="col-md-12">
    <h1><%= _('Create a new plan') %></h1>

    <p class="start-indent">
      <%= _("Before you get started, we need some information about your research project to set you up with the best DMP template for your needs.") %>
    </p>
  </div>
</div>

<div class="row">
  <div class="col-12">
    <form action="<%= plans_path %>" method="post">
      <!-- Rails form authenticity token -->
      <%= hidden_field_tag :authenticity_token, form_authenticity_token %>

      <!-- Plan name section -->
      <div>
        <label for="plan_title" id="project-title" class="form-label">
          <%= _('Enter project title') %>
        </label>
        <input type="text"
              id="plan_title"
              name="plan[title]"
              class="form-control"
              aria-labelledby="project-title"
              aria-required="true"
              aria-label="project-title"
              data-toggle="tooltip"
              data-placement="bottom"
              spellcheck="true">
      </div>
      <!-- Is-test checkbox -->
      <div>
        <div class="form-check">
          <input type="checkbox"
                 class="form-check-input"
                 id="is_test"
                 value="1">
          <label class="form-check-label" for="is_test">
            <%= _('Mock project for testing, practice, or educational purposes') %>
          </div>
        </div>
      </div>

      <!-- Template selection -->
      <div>
        <label for="template_id" id="dmp-template" class="form-label">
          <%= _('Select a DMP template') %>
        </label>
        <select id="template_id"
                name="plan[template_id]"
                class="form-select"
                aria-labelledby="template-selection"
                aria-required="true"
                data-toggle="tooltip"
                data-placement="bottom">
        <option value=""><%= _('--Select--') %></option>
        <% @templates_grouped.each do |group_label, group_templates| %>
          <optgroup label="<%= group_label %>">
            <% group_templates.each do |template_title, template_id| %>
              <option value="<%= template_title %>">
                <%= template_id %>
              </option>
            <% end %>
          </optgroup>
        <% end %>
      </div>

      <!-- Submit and Cancel buttons -->
      <button type="submit" class="btn btn-primary">
        <%= _('Create') %>
      </button>
      <%= link_to _('Cancel'), plans_path, class: 'btn btn-secondary' %>
    </form>
  </div>
</div>
